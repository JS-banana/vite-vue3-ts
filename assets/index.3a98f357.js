var cn=Object.defineProperty,dn=Object.defineProperties;var fn=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var Ke=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var Be=Math.pow,Qe=(e,t,n)=>t in e?cn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,R=(e,t)=>{for(var n in t||(t={}))Ke.call(t,n)&&Qe(e,n,t[n]);if(ve)for(var n of ve(t))Ne.call(t,n)&&Qe(e,n,t[n]);return e},Ee=(e,t)=>dn(e,fn(t));var le=(e,t)=>{var n={};for(var o in e)Ke.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&ve)for(var o of ve(e))t.indexOf(o)<0&&Ne.call(e,o)&&(n[o]=e[o]);return n};var Te=(e,t,n)=>new Promise((o,u)=>{var g=d=>{try{r(n.next(d))}catch(y){u(y)}},h=d=>{try{r(n.throw(d))}catch(y){u(y)}},r=d=>d.done?o(d.value):Promise.resolve(d.value).then(g,h);r((n=n.apply(e,t)).next())});import{d as we,O as te,i as D,x as b,y as mn,an as vn,o as L,c as H,e as A,f as ee,A as oe,E as ae,ao as pn,R as pe,Q as Ue,a2 as Ce,B as qe,F as Oe,aj as _n,al as gn,ap as hn,aq as yn,ak as bn,ar as En,_ as Tn,am as wn,as as Cn,a5 as On,at as Sn,au as We,w as Se,Z as $n,b as In,h as $e,U as kn,av as Ye,D as Ie,aw as Rn,j as Pn,ax as Fn,a6 as Ln,ay as jn}from"./vendor.928f869a.js";/* empty css              *//* empty css               *//* empty css              *//* empty css              */import{_ as ze,u as Dn}from"./index.42363b5b.js";const An=we({props:["hiddenFilter","button","items","model"],emits:["onSearch"],setup(e,{emit:t}){const n=te(e.model||{}),o=D(()=>(e.items||[]).map(h=>R({type:"input"},h))),u=()=>{t("onSearch")},g=b(e.hiddenFilter);return mn(()=>{!e.button&&!e.items&&(g.value=!0)}),{formModel:n,getItems:o,hasHidden:g,handleSubmit:u}}}),Mn={key:0,class:"text"},Kn=Ue("\u67E5\u8BE2");function Nn(e,t,n,o,u,g){const h=_n,r=gn,d=hn,y=yn,_=bn,s=En,I=Tn,O=wn,T=Cn,w=On,K=vn("auth");return e.hasHidden?Ce("",!0):(L(),H(w,{key:0,"body-style":{padding:"0 0 24px 0"},bordered:!1},{default:A(()=>[ee(T,{class:"form-container",layout:"horizontal",model:e.formModel},{default:A(()=>[ee(O,{type:"flex"},{default:A(()=>[e.button?(L(),H(r,{key:0,flex:"100px"},{default:A(()=>{var l;return[e.button.type==="text"?(L(),oe("span",Mn,ae(e.button.label),1)):pn((L(),H(h,pe({key:1},e.button,{onClick:(l=e.button)==null?void 0:l.onClick}),{default:A(()=>[Ue(ae(e.button.label),1)]),_:1},16,["onClick"])),[[K,e.button.auth]])]}),_:1})):Ce("",!0),ee(r,{flex:"auto",class:"rowE"},{default:A(()=>[ee(I,null,{default:A(()=>[(L(!0),oe(Oe,null,qe(e.getItems,l=>(L(),H(s,{key:l.name,name:l.name},{default:A(()=>[l.type==="select"?(L(),H(d,pe({key:0,key:`select-${l.name}`},l,{value:e.formModel[l.name],"onUpdate:value":k=>e.formModel[l.name]=k,class:"default-select-w"}),null,16,["value","onUpdate:value"])):l.type==="date"?(L(),H(y,pe({key:1,key:`date-${l.name}`},l,{value:e.formModel[l.name],"onUpdate:value":k=>e.formModel[l.name]=k,class:"default-select-w"}),null,16,["value","onUpdate:value"])):(L(),H(_,pe({key:2},l,{key:`input-${l.name}`,value:e.formModel[l.name],"onUpdate:value":k=>e.formModel[l.name]=k,onSearch:e.handleSubmit,class:"default-search-w"}),{enterButton:A(()=>[ee(h,{type:"primary"},{default:A(()=>[Kn]),_:1})]),_:2},1040,["value","onUpdate:value","onSearch"]))]),_:2},1032,["name"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}))}var Bn=ze(An,[["render",Nn],["__scopeId","data-v-26216c94"]]);const Qn={},ke=Symbol("GLOBAL_OPTIONS_PROVIDE_KEY"),Ve=()=>Qn;we({name:"RequestConfig",props:{config:{type:Object,required:!0}},setup(e,{slots:t}){const{config:n}=e;return Sn(ke,n),()=>{var o;return(o=t.default)===null||o===void 0?void 0:o.call(t)}}});const Un=Object.prototype.toString,He=e=>Un.call(e),qn=e=>He(e)==="[object String]",Ge=e=>He(e)==="[object Object]",Wn=e=>Array.isArray(e),ie=e=>e!==null&&typeof e=="object",Yn=e=>ie(e)&&_e(e.then)&&_e(e.catch),_e=e=>e instanceof Function,ge=e=>e==null,Re=typeof window=="undefined",Pe=()=>{var e,t;return!Re&&((e=window)===null||e===void 0||(t=e.document)===null||t===void 0?void 0:t.visibilityState)==="visible"},xe=()=>{var e,t,n;return(e=!Re&&((t=window)===null||t===void 0||(n=t.navigator)===null||n===void 0?void 0:n.onLine))!==null&&e!==void 0?e:!0},zn=e=>{const t={};return Object.keys(e).forEach(n=>{t[n]=In(e[n])}),t},ue=Promise.resolve(null),Je=(...e)=>Te(void 0,null,function*(){const t=yield fetch(...e);if(t.ok)return t.json();throw new Error(t.statusText)}),Ze=(e,t,n=void 0)=>{const o=t.replace(/\[(\d+)\]/g,".$1").split(".");let u=e;for(const g of o)if(u=Object(u)[g],u===void 0)return n;return u};function Vn(e,t){const n=Object.assign({},e);for(const o of t)delete n[o];return n}const Xe=(e,t=!1)=>{const n=`Warning: [vue-request] ${e}`;if(t)return new Error(n);console.error(n)},Hn=(e,t)=>{let n=!1;return(...o)=>{n||(n=!0,e(...o),setTimeout(()=>{n=!1},t))}};var Fe;const en=new Set,nn=new Set,tn=new Set,he=(e,t)=>{let n;switch(e){case"FOCUS_LISTENER":n=en;break;case"RECONNECT_LISTENER":n=tn;break;case"VISIBLE_LISTENER":n=nn;break}if(!n.has(t))return n.add(t),()=>{n.delete(t)}},Le=e=>{e.forEach(t=>{t()})};!Re&&(Fe=window)!==null&&Fe!==void 0&&Fe.addEventListener&&(window.addEventListener("visibilitychange",()=>{Pe()&&Le(nn)},!1),window.addEventListener("focus",()=>Le(en),!1),window.addEventListener("online",()=>Le(tn),!1));function on(e,t,n){let o,u,g,h,r,d,y=0,_=!1,s=!1,I=!0;const O=!t&&t!==0&&typeof window.requestAnimationFrame=="function";if(typeof e!="function")throw new TypeError("Expected a function");t=+t||0,ie(n)&&(_=!!n.leading,s="maxWait"in n,g=s?Math.max(+n.maxWait||0,t):g,I="trailing"in n?!!n.trailing:I);function T(c){const m=o,S=u;return o=u=void 0,y=c,h=e.apply(S,m),h}function w(c,m){return O?(window.cancelAnimationFrame(r),window.requestAnimationFrame(c)):setTimeout(c,m)}function K(c){if(O)return window.cancelAnimationFrame(c);clearTimeout(c)}function l(c){return y=c,r=w(p,t),_?T(c):h}function k(c){const m=c-d,S=c-y,P=t-m;return s?Math.min(P,g-S):P}function i(c){const m=c-d,S=c-y;return d===void 0||m>=t||m<0||s&&S>=g}function p(){const c=Date.now();if(i(c))return j(c);r=w(p,k(c))}function j(c){return r=void 0,I&&o?T(c):(o=u=void 0,h)}function N(){r!==void 0&&K(r),y=0,o=d=u=r=void 0}function z(){return r===void 0?h:j(Date.now())}function B(){return r!==void 0}function M(...c){const m=Date.now(),S=i(m);if(o=c,u=this,d=m,S){if(r===void 0)return l(d);if(s)return r=w(p,t),T(d)}return r===void 0&&(r=w(p,t)),h}return M.cancel=N,M.flush=z,M.pending=B,M}function an(e,t){for(const n in t)if(t[n]!==void 0){if(!ie(t[n])||!ie(e[n])||!(n in e)){e[n]=t[n];continue}(Ge(t[n])||Wn(t[n]))&&an(e[n],t[n])}}function rn(e,...t){const n=Object.assign({},e);if(!t.length)return n;for(const o of t)an(n,o);return n}function Gn(e,t,n){let o=!0,u=!0;if(typeof e!="function")throw new TypeError("Expected a function");return ie(n)&&(o="leading"in n?!!n.leading:o,u="trailing"in n?!!n.trailing:u),on(e,t,{leading:o,trailing:u,maxWait:t})}const xn=(e,t)=>n=>{Object.keys(n).forEach(o=>{e[o].value=n[o]}),t.forEach(o=>o(e))},ye=(e,t,n)=>{var o,u,g;const{initialAutoRunFlag:h,initialData:r,loadingDelay:d,pollingInterval:y,debounceInterval:_,debounceOptions:s,throttleInterval:I,throttleOptions:O,pollingWhenHidden:T,pollingWhenOffline:w,errorRetryCount:K,errorRetryInterval:l,stopPollingWhenHiddenOrOffline:k,refreshOnWindowFocus:i,refocusTimespan:p,updateCache:j,formatResult:N,onSuccess:z,onError:B,onBefore:M,onAfter:c}=t,m=b(0),S=b((o=n==null?void 0:n.loading)!==null&&o!==void 0?o:!1),P=b((u=n==null?void 0:n.data)!==null&&u!==void 0?u:r),Q=b(n==null?void 0:n.error),q=b((g=n==null?void 0:n.params)!==null&&g!==void 0?g:[]),v=xn({loading:S,data:P,error:Q,params:q},[f=>j(f)]),E=()=>{m.value=0},W=b(0),G=b(),x=b(),ne=b(),ce=()=>{G.value&&G.value(),ne.value&&ne.value(),x.value&&x.value()},se=()=>{let f;return d&&(f=setTimeout(v,d,{loading:!0})),()=>f&&clearTimeout(f)},de=f=>{if(Q.value&&K!==0)return;let F;if(!ge(y)&&y>=0)if((T||Pe())&&(w||xe()))F=setTimeout(f,y);else{k.value=!0;return}return()=>F&&clearTimeout(F)},fe=D(()=>{if(l)return l;const f=1e3,F=1,U=9,X=Math.floor(Math.random()*Be(2,Math.min(m.value,U))+F);return f*X}),a=f=>{let F;const U=K===-1,X=m.value<K;return Q.value&&(U||X)&&(U||(m.value+=1),F=setTimeout(f,fe.value)),()=>F&&clearTimeout(F)},$=(...f)=>{v({loading:!d,params:f}),ne.value=se(),W.value+=1;const F=W.value;return M==null||M(f),e(...f).then(U=>{if(F===W.value){const X=N?N(U):U;return v({data:X,loading:!1,error:void 0}),z&&z(X,f),E(),X}return ue}).catch(U=>(F===W.value&&(v({data:void 0,loading:!1,error:U}),B&&B(U,f),console.error(U)),ue)).finally(()=>{F===W.value&&(ne.value(),x.value=a(()=>$(...f)),G.value=de(()=>$(...f)),c==null||c(f))})},C=!ge(_)&&on($,_,s),Y=!ge(I)&&Gn($,I,O),V=(...f)=>(ce(),!h.value&&C?(C(...f),ue):Y?(Y(...f),ue):(E(),$(...f))),J=()=>{W.value+=1,v({loading:!1}),C&&C.cancel(),Y&&Y.cancel(),ce()},Z=()=>V(...q.value),un=f=>{const F=_e(f)?f(P.value):f;v({data:F})},De=[],me=f=>{f&&De.push(f)},Ae=()=>{k.value&&(T||Pe())&&(w||xe())&&(Z(),k.value=!1)};T||me(he("VISIBLE_LISTENER",Ae)),w||me(he("RECONNECT_LISTENER",Ae));const Me=Hn(Z,p);return i&&(me(he("VISIBLE_LISTENER",Me)),me(he("FOCUS_LISTENER",Me))),{loading:S,data:P,error:Q,params:q,run:V,cancel:J,refresh:Z,mutate:un,unmount:()=>{De.forEach(f=>f())}}},be=new Map,je=e=>{if(ge(e))return;const t=be.get(e);if(!!t)return{data:t.data,cacheTime:t.cacheTime}},Jn=(e,t,n)=>{const o=be.get(e);o!=null&&o.timer&&clearTimeout(o.timer);const u=setTimeout(()=>be.delete(e),n);be.set(e,{data:t,timer:u,cacheTime:new Date().getTime()})},re="__QUERY_DEFAULT_KEY__";function Zn(e,t){const n=We(ke,{}),fe=R(R(R({},Ve()),n),t),{cacheKey:o,defaultParams:u=[],manual:g=!1,ready:h=b(!0),refreshDeps:r=[],loadingDelay:d=0,pollingWhenHidden:y=!1,pollingWhenOffline:_=!1,refreshOnWindowFocus:s=!1,refocusTimespan:I=5e3,cacheTime:O=6e5,staleTime:T=0,errorRetryCount:w=0,errorRetryInterval:K=0,queryKey:l}=fe,k=le(fe,["cacheKey","defaultParams","manual","ready","refreshDeps","loadingDelay","pollingWhenHidden","pollingWhenOffline","refreshOnWindowFocus","refocusTimespan","cacheTime","staleTime","errorRetryCount","errorRetryInterval","queryKey"]),i=b(!1),p=b(!1),N=R({initialAutoRunFlag:p,loadingDelay:d,pollingWhenHidden:y,pollingWhenOffline:_,stopPollingWhenHiddenOrOffline:i,cacheKey:o,errorRetryCount:w,errorRetryInterval:K,refreshOnWindowFocus:s,refocusTimespan:I,updateCache:a=>{var $,C;if(!o)return;const Y=($=je(o))===null||$===void 0?void 0:$.data,V=Y==null?void 0:Y.queries,J=zn(a),Z=(C=l==null?void 0:l(...a.params.value))!==null&&C!==void 0?C:re;Jn(o,{queries:Ee(R({},V),{[Z]:R(R({},V==null?void 0:V[Z]),J)}),latestQueriesKey:Z},O)}},Vn(k,["pagination","listKey"])),z=b(!1),B=b(),M=b(),c=b(),m=te({[re]:te(ye(e,N))}),S=b(re),P=D(()=>{var a;return(a=m[S.value])!==null&&a!==void 0?a:{}});if(Se(P,a=>{z.value=a.loading,B.value=a.data,M.value=a.error,c.value=a.params},{immediate:!0,deep:!0}),o){var Q;const a=je(o);a!=null&&(Q=a.data)!==null&&Q!==void 0&&Q.queries&&(Object.keys(a.data.queries).forEach($=>{const C=a.data.queries[$];m[$]=te(ye(e,N,{loading:C.loading,params:C.params,data:C.data,error:C.error}))}),a.data.latestQueriesKey&&(S.value=a.data.latestQueriesKey))}const q=b(),v=b(!1),E=(...a)=>{var $;if(!h.value&&!v.value)return q.value=a,ue;const C=($=l==null?void 0:l(...a))!==null&&$!==void 0?$:re;return m[C]||(m[C]=te(ye(e,N))),S.value=C,P.value.run(...a)},W=()=>{G(),S.value=re,m[re]=te(ye(e,N))},G=()=>{Object.keys(m).forEach(a=>{m[a].cancel(),m[a].unmount(),delete m[a]})},x=()=>P.value.cancel(),ne=()=>P.value.refresh(),ce=a=>P.value.mutate(a);if(!g){var se;p.value=!0;const a=je(o),$=(se=a==null?void 0:a.data.queries)!==null&&se!==void 0?se:{},C=a&&(T===-1||a.cacheTime+T>new Date().getTime()),Y=Object.keys($).length>0;C||(Y?Object.keys(m).forEach(V=>{var J;(J=m[V])===null||J===void 0||J.refresh()}):E(...u)),p.value=!1}const de=b();return de.value=Se(h,a=>{v.value=!0,a&&q.value&&(E(...q.value),de.value())},{flush:"sync"}),r.length&&Se(r,()=>{!g&&P.value.refresh()}),$n(()=>{G()}),{loading:z,data:B,error:M,params:c,cancel:x,refresh:ne,mutate:ce,run:E,reset:W,queries:m}}const sn=e=>(...t)=>{if(_e(e))return sn(e(...t))();if(Yn(e))return e;if(Ge(e)){const n=e,{url:o}=n,u=le(n,["url"]);return Je(o,u)}else{if(qn(e))return Je(e);throw Xe("Unknown service type",!0)}};function Xn(e,t){var n,o;const u=sn(e),g={pagination:{currentKey:"current",pageSizeKey:"pageSize",totalKey:"total",totalPageKey:"totalPage"}},h=We(ke,{}),Q=rn(g,{pagination:(n=Ve().pagination)!==null&&n!==void 0?n:{}},{pagination:(o=h.pagination)!==null&&o!==void 0?o:{}},t!=null?t:{}),{pagination:{currentKey:r,pageSizeKey:d,totalKey:y,totalPageKey:_},queryKey:s}=Q,I=le(Q,["pagination","queryKey"]);s&&Xe("usePagination does not support concurrent request");const O=rn({defaultParams:[{[r]:1,[d]:10}]},I),q=Zn(u,O),{data:T,params:w,queries:K,run:l,reset:k}=q,i=le(q,["data","params","queries","run","reset"]),p=v=>{const[E,...W]=w.value,x=[R(R({},E),v),...W];l(...x)},j=v=>{p({[r]:v})},N=v=>{p({[d]:v})},z=(v,E)=>{p({[r]:v,[d]:E})},B=b(!1),M=()=>Te(this,null,function*(){const{defaultParams:v,manual:E}=O;k(),E||(B.value=!0,yield l(...v),B.value=!1)}),c=D(()=>Ze(T.value,y,0)),m=D({get:()=>{var v,E;return(v=(E=w.value[0])===null||E===void 0?void 0:E[r])!==null&&v!==void 0?v:O.defaultParams[0][r]},set:v=>{j(v)}}),S=D({get:()=>{var v,E;return(v=(E=w.value[0])===null||E===void 0?void 0:E[d])!==null&&v!==void 0?v:O.defaultParams[0][d]},set:v=>{N(v)}}),P=D(()=>Ze(T.value,_,Math.ceil(c.value/S.value)));return R({data:T,params:w,current:m,pageSize:S,total:c,totalPage:P,reloading:B,run:l,changeCurrent:j,changePageSize:N,changePagination:z,reload:M},i)}const et="YYYY-MM-DD HH:mm:ss",nt="YYYY-MM-DD ";function tt(e=void 0,t=et){return $e(e).format(t)}function ln(e=void 0,t=nt){return $e(e).format(t)}const ot=we({props:["bordered","hiddenFilter","url","columns","actions","button","items","model","resKey","scroll"],setup(e){const{hasPermission:t}=Dn(),{data:n,run:o,loading:u,current:g,pageSize:h,total:r,refresh:d}=Xn(e.url,{pagination:{pageSizeKey:"limit",currentKey:"page"}}),y=D(()=>{var i;return(i=e.bordered)!=null?i:!0}),_=D(()=>{var i,p;return((p=n.value)==null?void 0:p[((i=e==null?void 0:e.resKey)==null?void 0:i.list)||"list"])||[]}),s=D(()=>({total:r.value,current:g.value,pageSize:h.value,showQuickJumper:!0,showSizeChanger:!0,showTotal:()=>kn("span",{},`\u5171 ${r.value} \u6761`)})),I=(i,p,j)=>{o(R({limit:i.pageSize,page:i==null?void 0:i.current,sortField:j.field,sortOrder:j.order},p))},O=D(()=>(Ye(e.actions)||[]).filter(i=>t(i.auth)).map(i=>{const{popConfirm:p}=i;return Ee(R(R({type:"link"},i),p||{}),{enable:!!p})})),T=D(()=>e.model),w=D(()=>e.button),K=D(()=>e.items);return{dataSource:_,loading:u,pagination:s,hasBordered:y,handleTableChange:I,run:o,refresh:d,getActions:O,tableFilterModel:T,tableFilterButton:w,tableFilterItems:K,onSearch:()=>{const i=Ye(T.value)||{};i&&Object.keys(i).map(p=>{i[p]&&$e.isMoment(i[p])&&(i[p]=ln(i[p]))}),o(R({page:g.value,limit:h.value},i))},formatDate:(i,p="date")=>{const j=p==="date"?ln:tt;return i.length===10?j(Number(i)*1e3):j(i)}}}}),at={class:"table-component"},rt=["type"],st=["onClick","type"];function lt(e,t,n,o,u,g){const h=Bn,r=Fn,d=Ln,y=jn;return L(),oe("div",at,[ee(h,{button:e.tableFilterButton,items:e.tableFilterItems,model:e.tableFilterModel,hiddenFilter:e.hiddenFilter,pagination:null,onOnSearch:e.onSearch},null,8,["button","items","model","hiddenFilter","onOnSearch"]),ee(y,{class:Pn(["ant-table-striped",{border:e.hasBordered}]),rowClassName:(_,s)=>s%2==1?"table-striped":null,dataSource:e.dataSource,columns:e.columns,rowKey:_=>_.id,pagination:e.pagination,loading:e.loading,onChange:e.handleTableChange,scroll:e.scroll},{toDate:A(({text:_})=>[Ie("span",null,ae(_?e.formatDate(_):"-"),1)]),toDateTime:A(({text:_})=>[Ie("span",null,ae(_?e.formatDate(_,"time"):"-"),1)]),action:A(({record:_})=>[(L(!0),oe(Oe,null,qe(e.getActions,(s,I)=>(L(),oe(Oe,{key:`${I}-${s.label}`},[s.enable?(L(),H(r,{key:0,title:s==null?void 0:s.title,onConfirm:O=>s==null?void 0:s.onConfirm(_),onCancel:O=>s==null?void 0:s.onCancel(_)},{default:A(()=>[Ie("a",{onClick:t[0]||(t[0]=Rn(()=>{},["prevent"])),type:s.type},ae(s.label),9,rt)]),_:2},1032,["title","onConfirm","onCancel"])):(L(),oe("a",{key:1,onClick:O=>s==null?void 0:s.onClick(_),type:s.type},ae(s.label),9,st)),I<e.getActions.length-1?(L(),H(d,{key:2,type:"vertical"})):Ce("",!0)],64))),128))]),_:1},8,["class","rowClassName","dataSource","columns","rowKey","pagination","loading","onChange","scroll"])])}var _t=ze(ot,[["render",lt],["__scopeId","data-v-b69de9d8"]]);export{_t as _};
